#   Version 2
##### TTY & MOUSE #####
# Or, if using TPM, just run TPM
# ~/.tmux.conf
# Options to make tmux more pleasant

set -g mouse on
set -g default-terminal "screen-256color"

##### LEADER KEY #####
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Configure the catppuccin plugin
set -g @catppuccin_flavor "mocha"
set -g @catppuccin_window_status_style "rounded"

##### LOAD CATPPUCCIN #####
run ~/.config/tmux/plugins/catppuccin/tmux/catppuccin.tmux
# For TPM, instead use `run ~/.tmux/plugins/tmux/catppuccin.tmux`

# Make the status line pretty and add some modules

##### STATUS LINE #####
set -g status-right-length 600
set -g status-left-length 200
set -g status-left "#[fg=red]ÔåÉ #[fg=blue] #[fg=white]| #[fg=green]Ôíâ #(basename $SHELL) #[fg=white]| #[fg=magenta]TheAnhDev üöÄüíªüêß"

# ##### MODULES #####
set -g status-right "#{E:@catppuccin_status_application}#[fg=white]|"
set -agF status-right "#{E:@catppuccin_status_cpu}#[fg=white]|"         
set -ag status-right "#[fg=magenta] #(free -h | awk '/Mem:/ {print \"Ôî∏ \" \$3 \"/\" \$2}')#[fg=white]|" 
set -ag status-right "#{E:@catppuccin_status_session}#[fg=white]|"      
set -ag status-right "#{E:@catppuccin_status_uptime}#[fg=white]|"        
set -agF status-right "#{E:@catppuccin_status_battery}#[fg=white]|"      

# Weather (tr·ª±c ti·∫øp t·ª´ wttr.in)
set -ag status-right "#[fg=cyan] Hanoi: #(curl -s 'wttr.in/Hanoi?format=1')#[fg=white]|" # Ph√¢n c√°ch v·ªõi d·∫•u |

# Date + Time
set -g status-interval 1
set -ag status-right "#[fg=yellow bold] Ôê∫ #(bash ~/.tmux/time.sh) #[fg=white]| #[fg=orange]ÔÑ≥ #(date +\"%a, %d/%m/%Y\")#[fg=white]|"  # Ph√¢n c√°ch v·ªõi d·∫•u |

# Nhi·ªát ƒë·ªô
set -ag status-right "#[fg=red]üå°Ô∏è #(sensors | grep 'Package id 0:' | cut -d '+' -f2 | cut -d ' ' -f1)#[fg=white]|" # Ph√¢n c√°ch v·ªõi d·∫•u |

# T·ªëc ƒë·ªô m·∫°ng
set -ag status-right "#[fg=cyan]ÔÅ£ #(cat /sys/class/net/wlan0/statistics/rx_bytes | numfmt --to=iec)#[fg=white]|" # Ph√¢n c√°ch v·ªõi d·∫•u |

# T√™n th∆∞ m·ª•c ƒëang ho·∫°t ƒë·ªông
set -ag status-right "#[fg=blue]üìÇ #(basename #{pane_current_path})#[fg=white]|" # Ph√¢n c√°ch v·ªõi d·∫•u |

# T√™n branch git ƒëang ho·∫°t ƒë·ªông
set -ag status-right "#[fg=green]ÓÇ† #(git -C #{pane_current_path} rev-parse --abbrev-ref HEAD 2>/dev/null) #[fg=yellow]ÔÅ© #(git -C #{pane_current_path} status --porcelain 2>/dev/null | wc -l | awk '{print $1 \" changes\"}') #[fg=cyan]ÔÑ¢ #(git -C #{pane_current_path} rev-list --count origin/$(git -C #{pane_current_path} rev-parse --abbrev-ref HEAD)..HEAD 2>/dev/null) ‚Üë #[fg=white]|"

##### LOAD MODULES KH√ÅC #####
run ~/.config/tmux/plugins/tmux-plugins/tmux-cpu/cpu.tmux
run ~/.config/tmux/plugins/tmux-plugins/tmux-battery/battery.tmux

##### SHORTCUTS TU·ª≤ CH·ªàNH #####
# M·ªü ghi ch√∫ theo gi·ªù
bind e split-window -h "nvim ~/Documents/git/scratch/notes_$(date +'%Y%m%d%H').md"

# M·ªü Neovim trong th∆∞ m·ª•c hi·ªán t·∫°i
bind v split-window -h -c "#{pane_current_path}" "zsh -c 'nvim; exec zsh'"

# ##### AUTO-RELOAD #####
bind r source-file ~/.tmux.conf \; display-message "‚úÖ Reloaded!"

